<!doctype html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      th:fragment="layout(content)"
      xmlns:sec="http://www.thymeleaf.org">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://getbootstrap.com/docs/5.2/assets/css/docs.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">



        <link rel="stylesheet" type="text/css" href="/css/login.css" />
        <link rel="stylesheet" type="text/css" href="/css/footer.css" />
        <title>Login</title>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/less" ></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    </head>

    <body>


        <main>
            <aside class="left-panel">
                <h2 class="company-name" id="company-name"></h2>
                <img src="img/esta.gif" class="gif">
            </aside>

            <article class="right-panel">
                <div class="container" id="container">

                    <div class="form-container sign-in">
                        <form action="#" th:action="@{/login}" method="post">
                            <h1 class="h1">Iniciar Sesión</h1>
                            <div class="social-icons">
                                <a href="#" class="icon"><i class="fa-brands fa-google-plus-g"></i></a>
                                <a href="#" class="icon"><i class="fa-brands fa-facebook-f"></i></a>
                            </div>

                            <div th:if="${param.error}" class="alert alert-danger alert-dismissible fade show" role="alert">
                                <strong>Email y contraseña no son correctos</strong>
                                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                            </div>

                            <input type="email" name="email" placeholder="Email" required>
                            <input type="password" name="password" placeholder="Contraseña" required>

                            <!-- Enlace que abre el modal -->
                            <a href="#" onclick="openModal()">¿No recuerdas tu contraseña?</a>

                            <button type="submit">Iniciar</button>

                            <p>¿No tienes cuenta? <a href="/registro" id="show-signup">Crear cuenta</a></p>
                        </form>
                    </div>

                    <<!-- Modal para recuperación de contraseña -->
                    <div id="passwordModal" class="modal" style="display: none;">
                        <div class="modal-content">
                            <span class="close" onclick="closeModal()">&times;</span>
                            <h2>Recuperar Contraseña</h2>

                            <!-- Formulario para recuperar la contraseña -->
                            <form action="#" th:action="@{/recuperar}" method="post">
                                <label for="email">Ingresa tu correo electrónico:</label>
                                <input type="email" id="email" name="email" placeholder="Correo electrónico" required>

                                <!-- Mostrar mensajes de error o éxito -->
                                <div th:if="${param.error}" class="alert alert-danger">
                                    <strong th:text="${param.error}"></strong>
                                </div>
                                <div th:if="${param.mensaje}" class="alert alert-success">
                                    <strong th:text="${param.mensaje}"></strong>
                                </div>

                                <button type="submit">Enviar</button>
                            </form>
                        </div>
                    </div>

                </div>
            </article>
        </main>

        
        
        

        
        
        
        
        

        <div id="footer"></div> 
        
        
        <script>
            // Función para abrir el modal
            function openModal() {
                document.getElementById("passwordModal").style.display = "block";
            }

            // Función para cerrar el modal
            function closeModal() {
                document.getElementById("passwordModal").style.display = "none";
            }

            // Cerrar el modal si el usuario hace clic fuera del contenido
            window.onclick = function (event) {
                var modal = document.getElementById("passwordModal");
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            };
        </script>
        
        <script th:if="${error}" type="text/javascript">
            Swal.fire({
                icon: 'error',
                title: '¡Error!',
                text: [[${error}]],  // El mensaje de error que se pasa desde el controlador
                showConfirmButton: true
            });
        </script>



        <script src="/js/script.js"></script>
        <script src="/js/carga.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"crossorigin="anonymous"></script>
    </body>

</html>